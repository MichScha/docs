## Published Data

When MQTT is enabled EMS-ESP will publish MQTT topics for each device. The frequency can be configured from the Web UI to be either sent when data changes or set to a specific period in seconds. A few important points

- When a value is a boolean it will be rendered according to the Boolean setting you have defined in the settings.
- The format is the MQTT Format as defined in the settings. Default format is `Nested` which uses a single topic to show multiple entries in the payload. Format `Single` will send each group as single payloads on multiple topics. `Home Assistant` will send additional config topics so HA can pick up the values automatically.

The table below list the topics being published:

| Topic                                    | Format | Description                                                                                          | Payload Example                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ---------------------------------------- | ------ | ---------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `status`                                 | n/a    | this is the MQTT will and testament messages                                                         | `online` or `offline`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `info`                                   | n/a    | for events                                                                                           | `{"event":"start","version":"2.1.0","ip":"10.10.10.140"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `heartbeat`                              | all    | system stats in JSON, every minute                                                                   | `{"status":"connected","rssi":90,"uptime":"000+11:48:02.367","uptime_sec":42482,"mqttfails":2,"txfails":0,"rxfails":3,"freemem":68,"fragmem":17}`                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `tapwater_active`                        | all    | boolean to show if the hot tap water is running (DHW)                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `heating_active`                         | all    | boolean to show if the heating is on                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `boiler_data`                            | all    | non warm water data from the Boiler device                                                           | `{"heatingActive":"off","tapwaterActive":"off","selFlowTemp":0,"selBurnPow":23,"curBurnPow":0,"pumpMod":0,"curFlowTemp":35.1,"retTemp":35.5,"sysPress":1.6,"boilTemp":36.3,"burnGas":"off","flameCurr":0,"heatPump":"off","fanWork":"off","ignWork":"off","heatingActivated":"on","heatingTemp":75,"pumpModMax":90,"pumpModMin":55,"pumpDelay":1,"burnMinPeriod":10,"burnMinPower":0,"burnMaxPower":75,"boilHystOn":-6,"boilHystOff":6,"UBAuptime":4007616,"burnStarts":275144,"burnWorkMin":436129,"heatWorkMin":349044,"serviceCode":"0A","serviceCodeNumber":305}` |
| `boiler_data_ww`                         | all    | warm water data from the Boiler device                                                               | `{"wWComfort":"Hot","wWSelTemp":60,"wWSetTemp":62,"wWDisinfectionTemp":70,"wWType":"flow","wWChargeType":"3-way valve","wWCircPump":"off","wWCircPumpMode":"0x3min","wWCirc":"off","wWCurTemp":32.4,"wWCurFlow":0,"wwStorageTemp1":32.4,"wWActivated":"on","wWOneTime":"off","wWDisinfecting":"off","wWCharging":"off","wWRecharging":"on","wWTempOK":"on","wWActive":"off","wWHeat":"on","wWStarts":246432,"wWWorkM":87085}`                                                                                                                                         |
| `boiler_data_info`                       | all    | information data from the Boiler device                                                              | `{"nrgConsTotal":10,"auxElecHeatNrgConsTotal":10,"auxElecHeatNrgConsHeating":10,"auxElecHeatNrgConsDHW":10}`                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `thermostat_data`                        | nested | data from the thermostat and for each of its Heating Circuits.                                       | `{ "datetime":"09:03:2000 07:47", "display":"int. temperature", "language":"French", "building":"medium", "MinExtTemperature":-10, "CalIntTemperature":0, "clockOffset":3, "hc1":{"seltemp":15, "currtemp":20.6, "mode":"auto"}, "hc2":{"seltemp":8, "currtemp":18.2, "mode":"off"}}`                                                                                                                                                                                                                                                                                 |
| `thermostat_data`                        | single | In single format each heating circuit is published with own topic                                    | `{"datetime":"09:03:2000 07:47", "display":"int. temperature", "building":"medium", "MinExtTemperature":-10, "CalIntTemperature":0}`                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `thermostat_data_hc<id>`                 | single | hc in single format                                                                                  | `{"seltemp":15, "currtemp":20.6, "mode":"auto"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `mixer_data`                             | nested | data from The Mixer with nests `hc1` to `hc4`and `wwc1`, `wwc2`                                      | `{"hc1": {"flowTemp":55, "pumpStatus":"on", "valveStatus":25}}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `mixer_data_hc<id>` `mixer_data_wwc<id>` | single | data from The Mixer in single format for each of its Heating Circuits where `<id>` is circuit number | `{"type":"hc", "flowTemp":55, "pumpStatus":"on", "valveStatus":55}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `shower_data`                            |        | the shower timer and alert toggles plus the duration of the last shower taken                        | `{"timer":"0","alert":"0","duration":"4 minutes 32 seconds"}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `solar_data`                             | all    | all data from the Solar Module (if connected)                                                        | `{ "collectorTemp": 15.8, "tankBottomTemp": 29.8, "solarPumpModulation": 0, "cylinderPumpModulation": 0, "solarPump": "off", "valveStatus": "off", "tankHeated": "off", "collectorShutdown": "off", "energyLastHour": 0, "energyToday": 1792, "energyTotal": 2784.7 }`                                                                                                                                                                                                                                                                                                |
| `dallassensor_data`                      | nested | temperature readings from any external Dallas sensors attached to the ESP                            | `{"sensor1": {"id":"28-FF47-AC90-1604", "temp":20.94}}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `dallassensor_data`                      | single | temperature readings from Dallas sensor in single format with unique sensor id                       | `{"28-FF47-AC90-1604":20.94}`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |

## Monitoring the Queue

If you want more precise monitoring of the MQTT traffic I suggest using [MQTT Explorer](http://mqtt-explorer.com/). The console command `show mqtt` will show the status of the MQTT service and also the topic subscriptions and outbound publishing queue.
